\section{Auxilary Construction}\label{sec:auxiliaryConstruction}
Let $\Phi$ be a Boolean formula of P3SAT with variables $x_1,\ldots , x_n$ and clauses $C_1,\ldots ,C_m$, where $A(\Phi)$ is the associated planar graph and $\tilde{A}\lr{\Phi}$ be corresponding honeycomb graph.
We continue to modify $\tilde{A}\lr{\Phi}$ to form the auxilary construction.   
For each hexagon in $\tilde{A}\lr{\Phi}$, we scale the hexagons in the following way: first we fix the center of the hexagon and then scale (shrink) the hexagon; the hexagons in the honeycomb no longer touch each other and form corridors and junctions between the hexagons. 
Formally, let a \textit{corridor} be a channel between two adjacent hexagons and a \textit{junction} be a region where three corridors meet.
We then finally re-scale this form of the honeycomb such that the side length of the hexagons are determined by polynomial of variable $n$ and $m$, $N(n,m)$ (as described below), while preserving the corridors formed from the first scaling.\newline

\begin{minipage}{\linewidth}
\begin{center}
\includegraphics[scale=.66]{graphics/FlexibleHexagons.pdf}
\captionof{figure}{
(a) A region of the honeycomb shown with scaling. The corridors and junctions formed from the first scaling is preserved after scaling the honeycomb grid to where the side lengths of the hexagon are $N(n,m)$.
(b) The same region in (a) containing flags.
}\label{fig:HoneycombFlixible.pdf}
\end{center}
\end{minipage}

Let the hexagons of Figure \ref{fig:HoneycombFlixible.pdf}(a) be obstacle hexagons that are fixed.
In Figure \ref{fig:HoneycombFlixible.pdf}(b), we have smaller hexagons within some corridors and junctions.
These hexagons are flags.
For each edge in $\tilde{A}(\Phi)$, we insert flags into the corridor corresponding to that edge.
Flexible hexagons are hinged at the vertex closest to origin and the side of the corridor (See Figure \ref{fig:variable}).
Let $t=2N^3-1$ be the number of flags in a corridor (see Figure \ref{fig:variable}). 
Scale the honeycomb such that the obstacle hexagons become regular hexagons of side length $(5t-1)/2+\sqrt{3}$, and then scale each obstacle hexagon independently from its center to a hexagon of side length $(5t-1)/2$ (see Figure \ref{fig:honeycomb}). 
%Let $\Phi$ be a Boolean formula in 3-CNF with variables $x_1,\ldots , x_n$ and clauses $C_1,\ldots ,C_m$, and let $A(\Phi)$ be the associated planar graph.
%We modify $A(\Phi)$ to obtain a plane graph $\tilde{A}(\Phi)$ of maximum degree 3 as follows: replace each \emph{variable} vertex $v$ by a cycle whose length equals the degree of $v$, and distribute the edges incident to $v$ among the vertices of the cycle.
%Embed $\tilde{A}(\Phi)$ into the section of a hexagonal tiling (e.g. see Figure \ref{fig:HoneyCombAssociatedGraphSmall} and Figure \ref{fig:assoc}, right), contained in a regular hexagon of side length $N$, where $N$ is a polynomial of $n$ and $m$~\cite{BK+98}.
% \begin{figure}[htbp]
% 	\centering
% 	\includegraphics[width=0.9\columnwidth]{graphics/fig-variable-hex+}
% 	\caption{(a) A corridor when all unit hexagons are in state R.
% (b) A corridor where all unit hexagons are in state L.
% (c) A junction where a small hexagon between two corridors
%     ensures that at most one unit hexagon enters the junction from those corridors.}	
% \end{figure}

\begin{minipage}{\linewidth}
\begin{center}
\includegraphics[width=0.9\columnwidth]{graphics/fig-variable-hex+}
\captionof{figure}{
(a) A corridor when all unit hexagons are in state R.
(b) A corridor where all unit hexagons are in state L.
(c) A junction where a small hexagon between two corridors
    ensures that at most one unit hexagon enters the junction from those corridors.}\label{fig:variable}
\end{center}
%\end{figure}
\end{minipage}

%These large hexagons are considered fixed obstacles in our auxiliary construction. 
Between two adjacent obstacle hexagons, there is a $\frac{5t-1}{2}\times \sqrt{3}$ rectanglar corridor.  %, which we call corridor. 
Three adjacent corridors meet at a regular triangle, which we call a junction. 
For each corridor, there are two junctions adjacent to it; of these two junctions, we denote the junction from which a flag in the corridor enters into as the \textit{active junction} (see Figure \ref{fig:ActiveChannel.pdf}).

\begin{minipage}{\linewidth}
\begin{center}
\includegraphics[width=0.9\columnwidth]{graphics/ActiveChannel.pdf}
\captionof{figure}{The active junction in (a) is the junction on the left and in (b) the active junction is on the right.  The active junction is the junction in which a flag enters from a corridor.}\label{fig:ActiveChannel.pdf}
\end{center}
%\end{figure}
\end{minipage}

We next describe variable, clause, and transmitter gadgets.
The basic building block of both variable and transmitter gadgets consists of $t$ regular hexagons of side length 1 (\emph{unit hexagons}, for short) attached to a wall of a corridor such that the hinges divide the wall into $t+1$ intervals of length $(1,2.5,\ldots ,2.5,1)$ as shown in Fig.~\ref{fig:variable}(a-b) for $t=3$. 

% \begin{lem}
% If the leftmost hexagon is in state R, then all $t$ hexagons are in state R, and the rightmost hexagon enters the junction on the right of the corridor.
% \end{lem}
% \begin{proof}
% Suppose the left most hexagon, $h_1$, in a corridor is in state R and there are $t$ hexagons in the corridor. 
% $h_i$ for $i=2,\dots, t$ is in either state $R$ or $L$.
% $h_2$ must be in the state $R$ otherwise we result in a collision with 
% \end{proof}
In some of the junctions, we attach a small hexagon of side length $\frac{1}{3}$ to one or two corners of the junction (see Fig.~\ref{fig:variable}(c) and Fig.~\ref{fig:transmitter}). 

\paragraph{Variable Gadget.}
The {\bf variable gadget} for variable $x_i$ is constructed as follows. 
Recall that variable $x_i$ corresponds to a cycle in the associated graph $\tilde{A}(\Phi)$, which has been embedded as a cycle in the hexagonal tiling, with corridors and junctions. 
In each junction along this cycle, attach a small hexagon in the common boundary of the two corridors in the cycle. 
Figure \ref{fig:VariableGadgetSmall.pdf} depicts a \textit{variable gadget} in the hexagonal grid.

\begin{minipage}{\linewidth}
\begin{center}
\includegraphics[width=0.45\columnwidth]{graphics/VariableGadgetSmall.pdf}
\captionof{figure}{This depicts a variable gadget with $x_1 = T$.  Carefully note that the flags around $x_1$ are in the state $R$. Corridors adjacent to two obstacles of a variable in the honeycomb do not have $t$ flags; these corridors simply have the flexible hexagons at the junctions.}\label{fig:VariableGadgetSmall.pdf}
\end{center}
\end{minipage}



\paragraph{Clause Gadget.}
Recall that a clause from a Boolean formula $\Phi$ in 3-CNF has three literals.  If $\Phi$ is a  'yes' instance, then at least one literal in every clause of $\Phi$ is true.  We construct the clause gadget to model this fact about Boolean formulas in 3-CNF.

The {\bf clause gadget} lies at a junction adjacent to three transmitter gadgets (see Fig.~\ref{fig:clause} and Section \ref{transmitterGadget}). 
At such a junction, we attach a unit line segment to an arbitrary vertex of the junction, and a small hexagon of side length $\frac{1}{3}$ to the other end of the segment. 
If unit hexagons enter the junction from all three corridors (i.e., all three literals are false), then there is no space left for the small hexagon. 

\begin{minipage}{\linewidth}
\begin{center}
\includegraphics[width=0.7\columnwidth]{graphics/fig-clause-hex}
\captionof{figure}{(a-b) A clause gadget $(x_i\vee x_j\vee x_k)$ is
    realizable when at least one of the literals is {\sc True}.
    (c) The clause gadget cannot be realized when all three literals are {\sc False}.}\label{fig:clause}
\end{center}
\end{minipage}

But if at most two unit hexagons enter the junction (i.e., one of the literals is true), then the unit segment and the small hexagon are realizable.

\paragraph{Transmitter Gadget.}\label{transmitterGadget}

In the planar 3-SAT graph $A(\Phi)$, every variable vertex has an associated cyclic order of edges.
Suppose we have a variable vertex $x_i$ with counter-clockwise cyclic order of edges $\lr{\left\lbrace x_i,C_1\right\rbrace,\left\lbrace x_i,C_2\right\rbrace, \dots, \left\lbrace x_i,C_k\right\rbrace }$.
Assign distinct junctions of the variable cycle of $x_i$ to the edges $\left\lbrace x_i,C_j\right\rbrace$ in the same cyclic order (refer to Figure \ref{fig:TransmitterGadgetSmall.pdf} for an example).
%In Figure \ref{fig:TransmitterGadgetSmall.pdf}(b), we have variable vertex $x_i$ with counter-clockwise cyclic order of edges $\lr{\left\lbrace x_i,C_1\right\rbrace,\left\lbrace x_i,C_2\right\rbrace,\left\lbrace x_i,C_3\right\rbrace }$. 

% \begin{minipage}{\linewidth}
% \begin{center}
% \includegraphics[width=0.66\columnwidth]{graphics/TransmitterDrawingTranslation.pdf}
% \captionof{figure}{(a) The large vertices on the variable gadget indicate the the corresponding junction of where a tranmitter gadget corresponding to an edge from $x_i$ to a clause in $\Phi$.  (b) The corresponding edges about $x_i$ of the bipartite planar graph $A(\Phi)$ and shows the cyclic order of edges about $x_i$.}\label{fig:TransmitterGadgetSmall.pdf}
% \end{center}
% %\end{figure}
% \end{minipage} 

% A {\bf transmitter gadget} is constructed for each edge $\left\lbrace x_i,C_j\right\rbrace$ of the graph $A(\Phi)$; it consists of a sequence of junctions and corridors from a variable gadget's junction to a clause junction.
% For each variable-clause edge of $A(\Phi)$, there are two possible junctions for the corresponding obstacle hexagon.%transmitter gadget.
% Figure \ref{fig:TransmitterGadgetSmall.pdf}(a) shows an example of the possible junctions (indicated with large vertices on the appropriate obstacle hexagons of the variable gadget) in which a transmitter gadget can be connected that corresponds to an edge in Figure \ref{fig:TransmitterGadgetSmall.pdf}(b).
 A {\bf transmitter gadget} is constructed for each edge $\left\lbrace x_i,C_j\right\rbrace$ of the graph $A(\Phi)$; it consists of a sequence of junctions and corridors from a variable gadget's junction to a clause junction.

For each junction in the transmitter gadget, we attach a small hexagon in the junction as shown in Figure \ref{fig:transmitter} except at the clause junction.
Choosing the location of the small hexagon depends on whether the non-negated or negated literal is found in the clause.
\begin{itemize}
\item[(a)]  For an edge $(x_i,C_j)$ of the graph $A(\Phi)$, if the non-negated literal of $x_i$ exists in $C_j$, attach the small hexagon to the left side of the junction (see Figure \ref{fig:VariableJunctionTransmitterSelection.pdf}(a)).
\item[(b)]  For an edge $(x_i,C_j)$ of the graph $A(\Phi)$, if the negated literal of $x_i$ exists in $C_j$, attach thhe small hexagon to the right side of the junction (see Figure \ref{fig:VariableJunctionTransmitterSelection.pdf}(b)).
\end{itemize}

\begin{minipage}{\linewidth}
\begin{center}
\includegraphics[width=0.80\columnwidth]{graphics/VariableJunctionTransmitterSelection.pdf}
\captionof{figure}{These four figures depict an example of placing a transmitter gadget corresponding to edge $\left\lbrace x_i, C_j \right\rbrace$.}
\label{fig:VariableJunctionTransmitterSelection.pdf}
\end{center}
\end{minipage} 

Figure \ref{fig:VariableJunctionTransmitterSelection.pdf} shows an example of each rule on choosing a junction to attach a transmitter gadget.
The first column transmits a ``true'' value between the variable gadget and clause junction.
The second column transmits a ``false'' value between the variable gadget and clause junction.
The variable gadgets in the first row are are in state $R$, i.e. variable $x_i = T$.
The variable gadgets in the second row are are in state $L$, i.e. variable $x_i = F$.

\begin{minipage}{\linewidth}
\begin{center}
	\includegraphics[width=0.7\columnwidth]{graphics/fig-transmitter-hex}
	\captionof{figure}{The common junction of a variable gadget and a transmitter gadget.
(a) When $x_i=T$, a hexagon of the transmitter may enter the junction of the variable gadget.
(b) When $x_i=T$, the transmitter gadget has several possible realizations.
(c) When $x_i=F$, no hexagon from the transmitter enters a junction of the variable gadget.}
	\label{fig:transmitter}
\end{center}
\end{minipage} 



%At the common junction with the variable gadget $x_i$, we attach one additional small hexagon to one of the vertices (refer to Fig.~\ref{fig:transmitter}). 


%The junction placement of a transmitter gadget depends upon the variable's state, $R$ or $L$.
%When the variable is false (i.e. state $L$), the tranmitter is place on a right-most junction above a variable gadget's obstacle hexagon or a left-most junction below a varaiable gadget's obstacle hexagon.
%Similarly, when the variable is true (i.e. state $R$), the tranmitter is place on a left-most junction above a variable gadget's obstacle hexagon or a right-most junction below a varaiable gadget's obstacle hexagon.
%When $x_i = F$ , no hexagon from the transmitter enters a junction of the variable gadget.
%This ensures that false literals are always correctly transmitted to the clause junctions (and true literals can always transmit correctly).
% \paragraph{Transmitter Gadget}\label{transmitterGadget}

% \begin{minipage}{\linewidth}
% \begin{center}
% \includegraphics[width=0.45\columnwidth]{graphics/TransmitterDrawingTranslation.pdf}
% \captionof{figure}{}\label{fig:TransmitterGadgetSmall.pdf}
% \end{center}
% %\end{figure}
% \end{minipage} 
% A {\bf transmitter gadget} is constructed for each edge $(x_i,C_j)$ of the graph $A(\Phi)$.
% Consider a variable vertex $x_i$ and its counter clockwise order of edges in a drawing of $A(\Phi)$, and the corresponding variable gadget of $x_i$ in $\tilde{A}(\Phi)$.
% We choose a corner of an obstacle hexagon of the variable gadget to attach a transmitter gadget with the following rules:
% \begin{itemize}
% \item[1]  For an edge $(x_i,C_j)$ of the graph $A(\Phi)$, if the non-negated literal of $x_i$ exists in $C_j$ where $x_i=T$, we attached a transmitter gadget to the  side of the obstacle hexagon that respects the variable vertex cycle.
% \item[2]  For an edge $(x_i,C_j)$ of the graph $A(\Phi)$, if the negated literal of $x_i$ exists in $C_j$ where $x_i=T$, we attached a transmitter gadget to the left side of the obstacle hexagon that respects the variable vertex cycle.
% \item[3] For an edge $(x_i,C_j)$ of the graph $A(\Phi)$, if the non-negated literal of $x_i$ exists in $C_j$ where $x_i=F$,
% \item[4] For an edge $(x_i,C_j)$ of the graph $A(\Phi)$, if the negated literal of $x_i$ exists in $C_j$ where $x_i=F$,
% \end{itemize}

% It connects a junction of the variable gadget $x_i$ with the junction representing the clause gadget $C_j$. 
% The gadget consists of a path of corridors and junctions: at each interior junction, attach a small hexagon in the common boundary of the two corridors in the path (similarly to the variable gadget).

% \begin{minipage}{\linewidth}
% \begin{center}
% \includegraphics[width=0.45\columnwidth]{graphics/TransmitterGadgetSmall.pdf}
% \captionof{figure}{This depicts a transmitter gadget connected with the variable gadget shown in Figure \ref{fig:VariableGadgetSmall.pdf}.  }\label{fig:TransmitterGadgetSmall.pdf}
% \end{center}
% %\end{figure}
% \end{minipage} 

% At the common junction with the variable gadget $x_i$, we attach one additional small hexagon to one of the vertices (refer to Fig.~\ref{fig:transmitter}). 
% If the literal $x_i$ (resp., $\overline{x}_i$) appears in $C_j$, then we attach a small hexagon to the corner of this junction such that if $x_i=F$ (resp., $\overline{x}_i=F)$, then the unit hexagon of the transmitter gadget cannot enter this junction. 
% The junction placement of a transmitter gadget depends upon the variable's state, $R$ or $L$.
% When the variable is false (i.e. state $L$), the tranmitter is place on a right-most junction above a variable gadget's obstacle hexagon or a left-most junction below a varaiable gadget's obstacle hexagon.
% Similarly, when the variable is true (i.e. state $R$), the tranmitter is place on a left-most junction above a variable gadget's obstacle hexagon or a right-most junction below a varaiable gadget's obstacle hexagon.
% When $x_i = F$ , no hexagon from the transmitter enters a junction of the variable gadget.
% This ensures that false literals are always correctly transmitted to the clause junctions (and true literals can always transmit correctly).

% A variable gadget for vertex $v$ in the associated graph of a P3SAT Boolean formula encompasses at least $2 \cdot \deg (v)$ consecutive obstacle hexagons. 
% The arrangement of the consecutive obstacle hexagons are in staggered fashion where there are at least $\deg (v)$ obstacle hexagons in the upper portion of the staggering arrangement and at least $\deg (v)$ obstacle hexagons in the lower portion of the staggering arrangement.
% To construct all transmitter gadgets corresponding to the edges of an associated graph of a P3SAT instance, there must be at least $\deg (v)$ left-most junctions and $\deg (v)$ right-most junctions in both the upper portion of the variable gadget and the lower portion of the variable gadget.
% Suppose the variable $v$ exists only in clauses that lie above the variable gadget.  
% The construction of the variable gadget allows for $\deg (v)$ placements of transmitters on either the left or right side of the upper obstacle hexagons accordingly.
% Similarly, suppose the variable $v$ exists only in clauses that lie above the variable gadget.  
% The construction of the variable gadget allows for $\deg (v)$ placements of transmitters on either the left or right side of the lower obstacle hexagons accordingly.
% Each obstacle hexagon has a left and right junction to admit a transmitter gadget to connect to.

% \begin{figure}[!htb]
%     \centering
%     \begin{minipage}{.45\textwidth}
%         \centering
%         \includegraphics[scale=.33]{graphics/VariableTrueTransmitterClause.pdf}
%         \caption{Variable $x_i$ with state $R$ transmitting the non-negated literal $x_i$ into clause $C_j$.}
%         \label{fig:VariableTrueTransmitterClause.pdf}
%     \end{minipage}%
%     \begin{minipage}{0.45\textwidth}
%         \centering
%         \includegraphics[scale=.33]{graphics/TrueVariableNegatedLiteralTransmitter.pdf}
%         \caption{Variable $x_i$ with state $R$ transmitting the negated literal $\lnot x_i$ into clause $C_j$.}
%         \label{fig:TrueVariableNegatedLiteralTransmitter.pdf}
%     \end{minipage}
% \end{figure}

% \begin{figure}[!htb]
%     \centering
%     \begin{minipage}{.45\textwidth}
%         \centering
%         \includegraphics[scale=.5]{graphics/FalseVariableNonNegatedLiteralTransmitter.pdf}
%         \caption{Variable $x_i$ with state $L$ transmitting the non-negated literal $x_i$ into clause $C_j$.}
%         \label{fig:FalseVariableNonNegatedLiteralTransmitter.pdf}
%     \end{minipage}%
%     \begin{minipage}{0.45\textwidth}
%         \centering
%         \includegraphics[scale=.35]{graphics/VariableFalseTransmitterClause.pdf}
%         \caption{Variable $x_i$ with state $L$ transmitting the negated literal $\lnot x_i$ into clause $C_j$.}
%         \label{fig:VariableFalseTransmitterClause.pdf}
%     \end{minipage}
% \end{figure}

% \begin{figure}[htbp]
% 	\centering
% 	\includegraphics[width=0.7\columnwidth]{graphics/fig-clause-hex}
% 	\caption{(a-b) A clause gadget $(x_i\vee x_j\vee x_k)$ is
%     realizable when at least one of the literals is {\sc True}.
%     (c) The clause gadget cannot be realized when all three literals are {\sc False}.}
% 	\label{fig:clause}
% \end{figure}





% \begin{thm}\label{thm:chp2-HingedPolygons-1}
%  Given an instance of a $NAE3SAT$,  it is a ``yes'' instance if and only if the 
% corresponding polygonal linkage logic engine has a collision-free configuration.  
% \end{thm}
% \begin{proof}
% Suppose we have an instance of a $NAE3SAT$ that is a ``yes'' instance. This implies that there is a 
% truth assignment such that each clause contains a true and a false literal. Now consider the polygonal linkage logic 
% engine corresponding to this instance. We now 
% show that it has a collision free configuration.

% For variables that are true, configure the armatures such that the flags corresponding to the 
% non-negated literals reside above the 
% shaft and the flags that correspond to the negated literals reside below this shaft.  For variables 
% that are false, configure the 
% armatures in the opposite orientation.  Each clause corresponds to a pair of rows in 
% the polygonal linkage logic engine, one row for non-negated literals and one for negated literals.  Because the 
% $NAE3SAT$ is a yes instance, every row contains at least one unflagged armature.  
% By Lemma \ref{lem:logicEngine1}, every row  has a collision-free configuration.

% Suppose we have an instance of a $NAE3SAT$ such that the corresponding polygonal linkage logic engine has a 
% collision-free configuration. By Lemma \ref{lem:logicEngine1} every row at least one unflagged 
% armature.  The $k^{th}$ clause is represented by the $k^{th}$ rows above and below the shaft. If the 
% literal $x_j$ is found in clause $C_k$, then the armature is unflagged in that row. If the literal 
% $\bar{x}_j$ is found in clause $C_k$, then $\bar{l}_{j,k}$ is unflagged.  All flags 
% corresponding to negated literals reside below the shaft and flags corresponding to non-negated 
% literals reside above the shaft.  All together we have that every clause has a true literal and a 
% false literal.  Thus, we have a 'yes' instance of the $NAE3SAT$.
% \end{proof}
\subsection{Functionality of the Auxilary Construction and Gadgets}

If the literal $x_i$ (resp., $\overline{x}_i$) appears in $C_j$, then we attach a small hexagon to the corner of this junction such that if $x_i=F$ (resp., $\overline{x}_i=F)$, then the unit hexagon of the transmitter gadget cannot enter this junction. 

A variable gadget for vertex $v$ in the associated graph of a P3SAT Boolean formula encompasses at least $2 \cdot \deg (v)$ consecutive obstacle hexagons. 
The arrangement of the consecutive obstacle hexagons are in staggered fashion about a horizontal line where there are at least $\deg (v)$ obstacle hexagons in the upper portion of the staggering arrangement and at least $\deg (v)$ obstacle hexagons in the lower portion of the staggering arrangement.

Section \ref{sec:auxiliaryConstruction} is a formal description of the auxilary construction and its gadgets.
This subsection covers the underlying assumptions and proofs about the functionality of the auxilary construction.
The first observations about the functionality of the auxilary construction are about the flags.
\begin{observation}\label{obs:corridor}

\begin{itemize}

\item[(1)] If the leftmost hexagon is in state R, then all $t$ hexagons are in state R, and the rightmost hexagon enters the junction on the right of the corridor.
\item[(2)] Similarly, if the rightmost hexagon is in state L, then all $t$ hexagons are in state L, and the leftmost hexagon enters the junction on the left of the corridor.
\end{itemize}
\end{observation}

Observation~\ref{obs:corridor} and the small hexagons ensure that the state of any unit hexagon along the cycle determines the state of all other unit hexagons in the cycle. 
This property defines the binary variable $x_i$: If $x_i=T$, then all unit hexagons in the top horizontal corridors are in state R; and if $x_i=F$, they are all in state L.

When a binary variable $x_i = T$, we will say that the variable in state $R$ and that the cycle of small hexagons around the variable gadget are in a ``clockwise direction''.
When a binary variable $x_i = F$, we will say that the variable is in state $L$ and that the cycle of small hexagons around the variable gadget are in a ``counter-clockwise direction''. 

The proof of the Observation \ref{obs:corridor} is similar to the proof of Lemma \ref{lem:logicEngine1} regarding a row in a logic engine having a collision-free configuration.
\begin{proof}
Suppose the leftmost hexagon, $h_1$, is in state $R$ in a corridor.
Denote the $t$ flags in a corridor as $h_1$, $h_2$, $\ldots$, $h_t$ from leftmost to rightmost respectively.
$h_2$ must be in state $R$ otherwise we result in a collision between $h_1$ and $h_2$.
Without losss of generality, $h_i$ and $h_{i+1}$ must be in a state $R$ in order to prevent an adjacent flag collision. 
This implies that rightmost flag $h_t$ must also be in state $R$; this implies that $h_t$ enters the junction that is on the right of the corridor.

Similarly, suppose the rightmost hexagon, $h_t$, is in state $L$ in a corridor.
Denote the $t$ flags in a corridor as $h_1$, $h_2$, $\ldots$, $h_t$ from leftmost to rightmost respectively.
$h_{t-1}$ must be in state $L$ otherwise we result in a collision between $h_t$ and $h_{t-1}$.
Without losss of generality, $h_i$ and $h_{i+1}$ must be in a state $L$ in order to prevent an adjacent flag collision. 
This implies that rightmost flag $h_1$ must also be in state $L$; this implies that $h_1$ enters the junction that is on the left of the corridor.
\end{proof}
The flags of the auxilary construction help communicate the boolean value of a variable gadget to the rest of the auxilary construction.
This communication property of the flags in a corridor is analagous to the flags in a row of a logic engine.

Each junction is a regular triangle, adjacent to three corridors. 
In some of the junctions, we attach a small hexagon of side length $\frac{1}{3}$ to one or two corners of the junction (see Fig.~\ref{fig:variable}(c) and Fig.~\ref{fig:transmitter}). 
Importantly, we have the following observation:
\begin{observation}\label{obs:junction}
If a small hexagon is attached to a vertex at a junction between two adjacent corridors, then a flag can enter the junction from at most one of those corridors.
\end{observation}
\begin{proof}
Suppose there is a small hexagon attached to a vertex at a junction between two adjacent corridors.
Suppose it is not that case that a flag can enter the junction from at most one of these adjacent corridors.
Then there are two flags entering the junction, one from each adjacent corridor.
The angular sum of the vertex about the adjacent corridors consists of the obstacle hexagon, both flags, and the small unit hexagon.
Each angle of each hexagon is $\frac{2 \pi}{3}$ radians, totalling to an angular sum of $\frac{8 \pi}{3} > 2 \pi$.
This is a contradiction with the total angular sum of a vertex on the plane to be $2 \pi$.
\end{proof}

Observation~\ref{obs:corridor} and the small hexagons ensure that the state of any unit hexagon along the cycle determines the state of all other unit hexagons in the cycle. 
This property defines the binary variable $x_i$: If $x_i=T$, then all unit hexagons in the top horizontal corridors are in state R; and if $x_i=F$, they are all in state L.

Suppose there is an edge $\left\lbrace x_i, C_j \right\rbrace$ in the graph $A(\Phi)$.
\begin{lem}\label{lem:aux-3}
If $x_i = T$ and its negated literal is in $C_j$, then a flag enters into the clause gadget of $C_j$, otherwise it need not enter; if $x_i = F$ and its non-negated literal is in $C_j$, then a flexible hexagon enters into the clause gadget of $C_j$, otherwise it need not enter.
\end{lem}
\begin{proof}
The transmitter gadget for each literal is placed on an active junction of the variable gadget. 
This junction is ``activated'' by the variable gadget.  
By Observation \ref{obs:junction}, the flag nearest of the transmitter gadget to the variable gadget does not enter the transmitter-variable junction.
By Observation \ref{obs:corridor} and the state of the flag nearest of the transmitter gadget to the variable gadget implies that the flags in that transmitter corridor activate the junction opposite the transmitter-variable junction.
The subsequent flags in the transmitter gadget corridors have the same state of the flag in the transmitter gadget nearest of the transmitter-variable junction by Observations \ref{obs:corridor} and \ref{obs:junction}.
This activation process continues up to the clause junction and the flag in the transmitter gadget nearest the clause junction enters the clause junction.
\end{proof}

\begin{lem}\label{lem:aux-1}
Hexagons in a clause junction have a non-overlapping placement if and only if at least one of the three literals is true.
\end{lem}
\begin{proof}
Suppose we have a hexagons in a clause junction that have a non-overlapping placement.
To show that there is at least one of the three literals is true,  we do a proof by contradiction.
Suppose all literals of the clause are false.
If all literals of the clause are false, then all flags in each transmitter gadget nearest their clause junction enters the clause junction, as shown in Figure \ref{fig:clause}(c) which show the small hexagon overlapping flags in the clause junction, a contradiction with hexagons in the clause junction have a non-overlapping placement.

If at least one of the three literals is true, then by Lemma \ref{lem:aux-3}, this literal's flag need not enter the transmitter-variable junction.
There allows for the small hexagon in the clause junction to move into the area where this literal's flag could enter the junction and thus allow non-overlapping placement of hexagons in the junction.
\end{proof}

For a variable gadget $x_i$, place horizontal axis $h$ at mid-height of the gadget.
Then we have the following lemma:
\begin{lem}\label{lem:aux-2}
If variable $x_i = T$, then all flags above $h$ are in state $R$ and all flags below $h$ are in state $L$; if variable $x_i = L$, then all flexible hexagons above $h$ are in state $L$ and all flexible hexagons below $h$ are in state $R$.    
\end{lem}
\begin{proof}
Suppose we have two adjacent corridors $k_i$ and $k_{i+1}$ sharing junction $J_i$ and without loss of generality, $k_i$ is the left most corridor.
Observation \ref{obs:junction} implies that there can only be one hexagon entering $J_i$ from either $k_i$ or $k_{i+1}$. If the hexagon that enters $J_i$ is from corridor $k_i$, then this hexagon has state $R$ and all flags in corridor $k_i$ are in state $R$ by Observation \ref{obs:corridor}. 
Since the nearest flag of corridor $k_{i+1}$ cannot enter the junction $J_i$, it must also have state $R$.  
All flags in corridor $k_{i+1}$ are in state $R$ by Observation \ref{obs:corridor}. 

The argument is similar if the hexagon entering $J_i$ is from corridor $k_{i+1}$ and all flags in both corridors $k_i$ and $k_{i+1}$ have state $L$.

Because variable gadgets form a simple cycle of corridors and junctions $\lr{k_1, J_1, k_2, J_2, \dots, k_n, J_n}$ and the argument above, all flags about a variable gadget have the same state.
\end{proof}


\begin{lem}\label{lem:aux-A}
For every instance $\Phi$ of P3SAT, the above polygonal linkage with flexible and obstacle polygons has the following properties: (1) it has polynomial size; (2) its hinge graph is a forest;
(3) it admits a realization such that the obstacle polygons remain fixed if and only if $\Phi$ is satisfiable.
\end{lem}
\begin{proof}

% Suppose we have an instance $\Phi$ of P3SAT with $m$ variables and $n$ clauses with a corresponding associated graph $A(\Phi)=(V,E)$ and it is satisfiable.  
% We need to show the following three properties about its corresponding auxilliary construnction: it has polynomial size, its hinge graph is a forest, and it admits a realization such that the obstacle polygons remain fixed.

\noindent (1) We can bound the number of obstacle hexagons to represent a variable gadget by $2 D$, where $D = \lr{ \max_{v \in V} \deg (v)}$.  
The number of clause junctions is $n$.
To give an upper bound on the number of flags in the auxiliary construction, we have to account for the flags in the transmitter gadgets, the extra hexagons found in junctions, and the flexible hexagons around the variable gadgets.

Recall that that the number of flags in a corridor are $ t = 2N(m,n)^3 + 1 $ where $N(m,n)$ is a polynomial. 
Recall that the drawing of $A(\Phi)$ have edges drawn in vertically and horizontally and can join at some ``elbow''.  
The distance can be measured in the $\ell_1$ norm.
Similarly in the honeycomb construction, the flexable hexagons zig-zig vertically and horizontally through out honeycomb.  
The number of corridors about an obstacle hexagon is $6$.
To give a generous upper bound on the number of flags in a transmitter gadget, is $6 \cdot t \cdot \ell_1\lr{v_i,C_j}$, assuming each obstacle hexagon is of unit height.

The number of junctions in the auxiliary construction is the number of junctions to form all variable gadgets, transmitter gadgets, and clause gadgets. 
We know there are at most $2 \cdot D$ obstacle hexagons to form each variable gadget and $6$ junctions for each obstacle hexagon.  
Therefore an upper bound for the number of flags around variable gadgets is $m \cdot 6 \cdot t \cdot 2 \cdot D$.
The upper bound for the number of junctions in a transmitter gadget is $6 \ell_1 \lr{v_i, C_j}$.  
Thus, the upper bound of all junctions in all transmitter gadgets is $$6 \cdot \sum_{\left\lbrace v_i, C_j \right\rbrace \in E} \ell_1 \lr{v_i, C_j}.$$
The upper bound on the total number of flags is
$$m \cdot 6 \cdot t \cdot 2 \cdot D + 6 \cdot \sum_{\left\lbrace v_i, C_j \right\rbrace \in E} \ell_1 \lr{v_i, C_j}.$$

\noindent (2) Recall that a forest is a disjoint union of trees. 
By construction, each flag is hinged to exactly one obstacle hexagon.  
There are no hinges between obstacle hexagons.
Consequently, each component of the hinge graph is a star, where the center corresponds to an obstacle hexagon and the leafs corresponds to the flexable hexagons attached to it.

\noindent (3) The final statement is to show an if and only if statement: it admits a realization such that the obstacle polygons remain fixed if and only if $\Phi$ is satisfiable.

Suppose $\Phi$ is satisfiable.  % and has $m$ variables $x_1$ through $x_m$ and $n$ clauses $C_1$ through $C_n$.
Each variable has a boolean value and we can encode the corresponding auxilary construction accordingly.  
For each variable, we encode the boolean value by the state of the flags surrounding the variable gadget to $R$ or $L$.  
Lemma \ref{lem:aux-2} shows that the corridors and junctions around the variable gadget are realizable.
Lemma \ref{lem:aux-3} also show that for each transmitter gadget, every corridor and junction are also realizable. 
Lemma \ref{lem:aux-1} shows that there is at least one hexagon in the clause junction and that the clause is realizable.
Thus all parts of the auxilary construction realizable and thus we have a realization.

Suppose the construction admits a realization such that the obstacle polygons remain fixed.
Each variable gadget's flags are configured to state $L$ or $R$. 
The variable's corresponding state correspond to the variable's truth value, i.e. $R$ for true and $L$ for false.
Using Lemma \ref{lem:aux-2}, the boolean state of the variable gadget is transmitted to all transmitter gadgets associated to it.
Each clause is realizable and so for every clause, there exists one true literal in the clause corresponding to a variable by Lemma \ref{lem:aux-1}. 
If every clause has some true literal, then the corresponding 3-CNF boolean formula is satisfiable.
\end{proof}
\paragraph{Modified Auxilary Construction}
We modify the auxiliary construction allowing all polygons to move freely, and by adding extra polygons and hinges so that the hinge graph becomes a \emph{tree}, and the size of the construction remains polynomial. 
Recall that our auxiliary construction is based on a polynomial section of the hexagonal grid, using obstacle hexagons of side lengths $(5t-1)/2$, unit hexagons (of side length 1), and small hexagons of side length $\frac{1}{3}$. 
We modify it in 3 steps as follows.

\begin{enumerate}
\item Move the obstacle hexagons apart such that the width of each corridor increases from $\sqrt{3}$ to $\sqrt{3}+1/(100N)$.
\item Replace the unit segment in each the clause gadget by a skinny rhombus of diameter $\sqrt{1 + \lr{100N}^{-2}}$ and width $1/(100N)$.
\item Consider a large (polynomial-size) regular hexagon $R$ that contains all gadgets in our construction, and enclose $R$ by a \emph{frame} of 6 congruent regular hexagons, as shown in Fig.~\ref{fig:frame}(a), hinged together in a path.
%
% \begin{minipage}{\linewidth}
% \begin{center}
% \includegraphics[width=0.3\columnwidth]{graphics/honeycomb.pdf}
% \captionof{figure}{The small honeycomb-like structure within the large hexagons depicts cells.}\label{fig:honeycomb}
% \end{center}
% %\end{figure}
% \end{minipage}
%
\item Connect the frame and the obstacles in $R$ into a simply connected polygonal linkage: In each obstacle hexagon, the bottom or bottom-left side is adjacent to the frame or to a corridor. Introduce a hinge at the midpoint of one such side in each obstacle hexagon. If this side is adjacent to the frame, then attach the hinge to the frame. Otherwise, the hinge is attached to a new \emph{connector} polygon: a skinny rhombus of diameter 1 and width $1/(200N)$. The far corner of each rhombus is hinged to the unit hexagon in the middle of the corridor at shown in Fig.~\ref{fig:frame}(b).
\end{enumerate}

\begin{figure}[htbp]
	\centering
	\includegraphics[width=0.95\columnwidth]{graphics/fig-frame-hex}
	\caption{(a) A frame (built of 6 hinged regular hexagons) encloses a hexagonal tiling, and
    vertical paths connect all obstacle hexagons to the frame.
    (b) A corridor is widened to $\sqrt{3}+1/N^2$. A connection between
    two adjacent obstacle hexagons is established via a skinny rhombus.}
	\label{fig:frame}
\end{figure}
We obtain a simply connected polygonal linkage. 
We now allow the obstacle hexagons to move freely, and call their original fixed position \emph{canonical}. 
\noindent (3) We may assume without loss of generality that the frame is at its original position. 
It is enough to show that the obstacle hexagons are still confined to an $1/N$-neighborhood of their canonical position, then it
follows that the polygonal linkage is realizable if and only if $\Phi$ is satisfiable.

In an arbitrary realization of $P$, each obstacle hexagon's position can be defined by their rotation and translation $\lr{\alpha,\beta,\delta}$ where $\alpha$ is the angular rotation, $\beta$ is the translation of the obstacle hexagon in the $x$ axis and $\delta$ is the translation of the obstacle hexagon in the $y$ axis.
Canonical position would have each obstacle hexagon's position as $(0,0,0)$.
\begin{lem}\label{lem:aux-C}
Let P be a polygonal linkage obtained from the modified auxilary construction.  
In every realization of $P$, the obstacle polygons are close to canonical position such that for every $\epsilon >0$, $$\left\vert \lr{\alpha,\beta,\delta} \right\vert < \epsilon$$
\end{lem}
We need to show that the modified auxilary construction could not deform in such a way that any information the construction encodes is lost or modified and the functionality of the gadgets within the construction behave as stated in the description.
In Figure \ref{fig:tiltedObstaclesInFrame.pdf}, we have a column of obstacle hexagons veering off $\ell$.
% The bottom most obstacle hexagon is glued to the side of the bottom frame hexagon.  
% The subsequent obstacle hexagons are rotated 
%Our goal is show that this quality cannot happen in the modified auxilary construction.  
Lemma \ref{lem:aux-C} serves as assurance that once a boolean formula of P3SAT is encoded into an arbitrary realization of the modified auxilary construction, the information of the boolean formula is preserved regardless of the positioning of the gadgets and components in the construction.
This quality shows that the information is stable and preserved in an arbitrary realization of the modified auxilary construction.

\begin{minipage}{\linewidth}
\begin{center}
\includegraphics[width=.3\columnwidth]{graphics/tiltedObstaclesInFrame.pdf}
\captionof{figure}{This figure depicts a column of obstacle hexagons rotated such that the obstacle hexagons veer of the vertical line $\ell$.}\label{fig:tiltedObstaclesInFrame.pdf}
\end{center}
\end{minipage}

\begin{proof}




































































































Given an arbitrary realization of $P$, each corridor in the realization has $t$ flags and one skinny rhombus. 
The skinny rhombus  has length $\sqrt{1 + \lr{100N}^{-2}}$.
The height of a skinny rhombus in canonical position is $\frac{1}{100N}$.
The obstacle hexagon has height of $ (t+1) \cdot \sqrt{3}$, and the flag is of height $\sqrt{3}$.  
Suppose there are $m+1$ obstacle hexagons and $m$ corridors between two opposing frame hexagons. 
The  $h_\text{max}$ is the following sum:
$$h_\text{max} = (m+1) (t+1) \sqrt{3} + m \lr{\sqrt{3}+ \frac{1}{100N}}$$
This sum is the upper bound of the distance between two opposing frame hexagons.%; denote it as $h_\text{max}$.
To find a lower bound on of the total height, we examine some qualities of the noncanonical realizations.

\begin{minipage}{\linewidth}
\begin{center}
\includegraphics[width=.9\columnwidth]{graphics/corridorNonCanonical.pdf}
\captionof{figure}{The obstacle hexagon here is in noncanonical position, and showing the side lengths adjacent to $\alpha_i$.}\label{fig:corridorNonCanonical.pdf}
\end{center}
\end{minipage}

The cross section of an arbitrary corridor must have a height of at least $\sqrt{3}$ everywhere. 
%noncanonical corridor must be at least 
Otherwise, a flag would overlap with an obstacle hexagon; it would no longer remain a realization since the height of a flag is $\sqrt{3}$.
In Figure \ref{fig:corridorNonCanonical.pdf}, we illustrate an obstacle hexagon, its upper corridor with the flag that has the hinge to the skinny rhombus.  
The rhombus is hinged at the midpoint of the upper side of the corridor.
The length from a corridor's midpoint to one end of the corridor is $\frac{N}{2}$.
$\gamma_j$ is the angle between $s_j$ and the horizontal axis at the height of the flag ($j = 1,2,\ldots, m$).
The bound of $\gamma_j$ is:
\begin{equation}\label{eqn:gammaBound}
\begin{array}{rcl}
\gamma_j &\leq & \tan^{-1} \lr{
								\frac{
										\sqrt{1+ \lr{	\frac{1}{100N}	}^2}
								}{
										\frac{N}{2}
								}	
							}\\
&=& \tan^{-1} \lr{\frac{2\sqrt{1 + \frac{1}{(100N)^2}}}{N}}\\
&\leq& \frac{2\sqrt{1 + \frac{1}{(100N)^2}}}{N} - \frac{1}{3}\lr{\frac{2\sqrt{1 + \frac{1}{(100N)^2}}}{N}}^3\\
&=&\frac{\lr{6N^2 - 8 - \frac{8}{(100N)^2}}\cdot \sqrt{1 + \frac{1}{(100N)^2}} }{3N^3}
\end{array} 
\end{equation}
Inequality \ref{eqn:gammaBound} uses the first two terms Maclaurin series of $\tan^{-1}$.
From this inequality, it is clear that as $N \rightarrow \infty$, $\gamma_j \rightarrow 0$.




We can now establish the lower bound of $h$. 
The cross section of the corridor must have a minimum height of $\sqrt{3}$ everywhere.
The height of an obstacle polygon in noncanonical position is $(t+1) \cdot \sec \alpha_i \cdot \sqrt{3}$.
%The height of the cross section of an obstacle polygon and   
\begin{eqnarray*}
h_\text{max} = (m+1) (t+1) \sqrt{3} + m \lr{\sqrt{3}+ \frac{1}{100N}}&\geq& \sum_{i = 1}^{m+1} (t+1) \cdot \sec \alpha_i \cdot \sqrt{3} + m \sqrt{3}\\
&\iff&\\
(m+1) (t+1) \sum_{i = 1}^{m+1} \lr{1 - \sec \alpha_i}&\geq& m \lr{\sqrt{3} - \lr{\sqrt{3}+ \frac{1}{100N}}}\\
&\iff&\\
\sum_{i = 1}^{m+1} \lr{ \sec \alpha_i - 1} &\leq& \frac{m}{100 N \sqrt{3} (m+1)(t+1) }\\
\sum_{i = 1}^{m+1} \lr{ \lr{1 + \frac{\alpha_i^2}{2}} - 1} &\leq&\frac{m}{100 N \sqrt{3} (m+1)\lr{\lr{2N^3 - 1}+1} }\\
\sum_{i = 1}^{m+1} \frac{\alpha_i^2}{2} &\leq&\frac{m}{200 N^4 (m+1) \sqrt{3} } \\
\sum_{i = 1}^{m+1} \alpha_i^2 &\leq& \frac{m}{100N^4 (m+1) \sqrt{3}}
\end{eqnarray*}
Focusing on the right hand side of the inequality above, we have the following result:
\begin{eqnarray*}
\frac{m}{100N^4 (m+1) \sqrt{3}} &<& \frac{m}{m+1}\\
\frac{1}{100N^4 \sqrt{3}}&<& 1
\end{eqnarray*}

As $N \rightarrow \infty$, $\frac{m}{100N^4 (m+1) \sqrt{3}} \rightarrow 0$ which implies $\sum_{i = 1}^{m+1} \alpha_i^2$ is bounded.  
The number of obstacle hexagons is determined by a polynomial $N(a,b)$ where $a$ is the number of variables in a corresponding Boolean formula and $b$ is the number of clauses in the Boolean formula.
Since $\alpha_i$ is bounded above, then there is a maximal rotation of each obstacle hexagon from canonical position.
Thus every realization of $P$, the obstacle polygons are close to canonical position.



% \begin{minipage}{\linewidth}
% \begin{center}
% \includegraphics[width=.3\columnwidth]{graphics/WrapAround.pdf}
% \captionof{figure}{This depicts an impossible realization from a column of obstacle hexagons in canonical position to a revolution wrapping around itself.}\label{fig:WrapAround.pdf}
% \end{center}
% \end{minipage}



%1)frame is fixed, only one realization of the frame
%2)NTS that a cross section of a column of obstacle polygons between two opposing hexagon frames
% 	a) h bounds the height
%	b) if alpha_i of the obstacle hexagon is a non-zero angle, the have a larger cross section.
For any realization of P, the frame hexagons are fixed in position.  
This implies there is a fixed height $h$ of any two opposing hexagonal frames.
Suppose we draw a straight line segment $\ell$ of length $h$ from two opposing hexagonal frames; we will use this line segment as a guide to show that the modified auxilary construction admits a realization such that the obstascle polygons along $\ell$ has a maximal displacement from canonical position.
$h$ is the upper bound of the height of vertically aligned obstacle hexagons and corridors.

\begin{minipage}{\linewidth}
\begin{center}
\includegraphics[width=.2\columnwidth ]{graphics/CrossSectionArea.pdf}
\captionof{figure}{The red dashed boxes enclosing the obstacle hexagons in the center column establish the cross sectional area for each obstacle hexagon in canonical position.}\label{fig:CrossSectionArea.pdf}
\end{center}
\end{minipage}

In Figure \ref{fig:CrossSectionArea.pdf}, the cross section of each obstacle hexagon in canonical position denoted in red dashed boxes.
The skinny rhombi attached to flags have freedom to move (see Figure \ref{fig:FlagWithRhombus.pdf}).

\begin{minipage}{\linewidth}
\begin{center}
\includegraphics[width=.33\columnwidth]{graphics/FlagWithRhombus.pdf}
\captionof{figure}{The figure shows the a flag with a skinny rhombus in a corridor.  The red circle shows a potential range of motion of the rhombus.}\label{fig:FlagWithRhombus.pdf}
\end{center}
\end{minipage}

Denote the obstacle hexagons in a column along $\ell$ as $O_1$, $O_2$, $\ldots$, $O_{m+1}$.
% Suppose the realization of P is not in canonical position.
Then there exists some angular rotation for $\alpha_i$ compared to canonical position for each obestacle hexagon $O_i$ for $i = 1 , \ldots, m+1$ (see Figuree \ref{fig:hexagonNonCanonical.pdf}).
If $\alpha_i$ is nonzero, the length of the cross section $\ell \cap O_i$ from $(t+1) \sqrt{3}$ to:% the canonical height of the obstacle hexagon changes from $(t+1) \sqrt{3}$ to:
\begin{eqnarray*}
\text{length}\lr{\ell \cap O_i}=\frac{(t+1) \sqrt{3}}{\cos \alpha_i} &=& (t+1) \cdot \sec \alpha_i \cdot \sqrt{3}\\
&\geq& (t+1) \lr{1 + \frac{\alpha_i}{2}} \sqrt{3}\\
&&\text{ where } \frac{-\pi}{2} \leq \alpha_i \leq \frac{\pi}{2}
\end{eqnarray*}
Where we use the fact that the Maclaurin series of $\sec \alpha_i$ expanded to two terms is $\lr{1 + \frac{\alpha_i}{2}} $.

\begin{minipage}{\linewidth}
\begin{center}
\includegraphics[width=.33\columnwidth]{graphics/hexagonNonCanonical.pdf}
\captionof{figure}{
% The obstacle hexagon here is in non-canonical position, and showing the side lengths adjacent to $\alpha_i$.
This figure shows two right triangles with angle $\alpha_i$ and sides of length $\frac{h}{2}$ and $\frac{h}{2 \cos \alpha_i}$
}\label{fig:hexagonNonCanonical.pdf}
\end{center}
\end{minipage}



% We can now establish the lower bound of $h$. 
% The smallest height of a corridor is $\sqrt{3}$.
% The height of an obstacle polygon in noncanonical position is $(t+1) \cdot \sec \alpha_i \cdot \sqrt{3}$.  
% \begin{eqnarray*}
% h_\text{max} = (m+1) (t+1) \sqrt{3} + m \lr{\sqrt{3}+ \frac{1}{100N}}&\geq& \sum_{i = 1}^{m+1} (t+1) \cdot \sec \alpha_i \cdot \sqrt{3} + m \sqrt{3}\\
% %h_\text{max} = m \cdot \lr{\sqrt{3} + 1 + \frac{1}{100N} + (t+1) \cdot \sqrt{3}} + (t+1) \cdot \sqrt{3}  &\geq& \sum_{i = 1}^{m+1} (t+1) \cdot \sec \alpha_i \cdot \sqrt{3} + m \sqrt{3}\\
% %h_\text{max} = m \cdot \lr{\sqrt{3} + 1 + \frac{1}{100N} + (t+1) \cdot \sqrt{3}} + (t+1) \cdot \sqrt{3}  &\geq& \sum_{i = 1}^{m+1} (t+1) \cdot \sec \alpha_i \cdot \sqrt{3} + m \sqrt{3}\\
% &\iff&\\
% (m+1) (t+1) \sum_{i = 1}^{m+1} \lr{1 - \sec \alpha_i}&\geq& m \lr{\sqrt{3} - \lr{\sqrt{3}+ \frac{1}{100N}}}\\
% &\iff&\\
% \sum_{i = 1}^{m+1} \lr{ \sec \alpha_i - 1} &\leq& \frac{m}{100 N \sqrt{3} (m+1)(t+1) }\\
% \sum_{i = 1}^{m+1}  \sec \alpha_i &\leq& \frac{m}{100 N \sqrt{3} (m+1)(t+1) } + (m+1)
% \end{eqnarray*}
% The bound above shows that each $\alpha_i$ is bounded above by the right hand side, i.e.:
% \begin{equation}\label{eqn:alphaBound}
% \alpha_i \leq \sec^{-1} \lr{\frac{m}{100 N \sqrt{3} (m+1)(t+1) } + (m+1)}
% \end{equation}
% Since $\alpha_i$ is bounded above, then there is a maximal rotation of each obstacle hexagon from canonical position.
% Thus every realization of $P$, the obstacle polygons are close to canonical position.
% %Let P be a polygonal linkage obtained from the modified auxilary construction.  
% % In every realization of $P$, the obstacle polygons are close to canonical position.



% Since the angles $\alpha_i$ are so small, extreme configurations of obstacle hexagons like the spiral in Figure \ref{fig:WrapAround.pdf} are not feasible.























































































































\end{proof}
\begin{lem}\label{lem:aux-B}
For every instance $\Phi$ of P3SAT, the above polygonal linkage with flexible and obstacle polygons has the following properties: (1) it has polynomial size; (2) the hinge graph of the modified auxilary construction is a tree;
(3) it admits a realization if and only if $\Phi$ is satisfiable.
\end{lem}

\begin{proof}
\noindent (1) Recall that for Lemma \ref{lem:aux-A}, we showed that the polygonal linkage was of polynomial size.  The modification of the auxilary construction consists of rhombi.
%We can bound the number of obstacle hexagons to represent a variable gadget by $2 D$, where $D = \lr{ \max_{v \in V} \deg (v)}$.  
% The number of clause junctions is $n$.
% To give an upper bound on the number of flags in the auxiliary construction, we have to account for the flags in the transmitter gadgets, the extra hexagons found in junctions, and the flexible hexagons around the variable gadgets.

% Recall that that the number of flags in a corridor are $ t = 2N(m,n)^3 + 1 $ where $N(m,n)$ is a polynomial. 
% Recall that the drawing of $A(\Phi)$ have edges drawn in vertically and horizontally and can join at some ``elbow''.  
% The distance can be measured in the $\ell_1$ norm.
% Similarly in the honeycomb construction, the flexable hexagons zig-zig vertically and horizontally through out honeycomb.  
% The number of corridors about an obstacle hexagon is $6$.
% To give a generous upper bound on the number of flags in a transmitter gadget, is $6 \cdot t \cdot \ell_1\lr{v_i,C_j}$, assuming each obstacle hexagon is of unit height.

% The number of junctions in the auxiliary construction is the number of junctions to form all variable gadgets, transmitter gadgets, and clause gadgets. 
% We know there are at most $2 \cdot D$ obstacle hexagons to form each variable gadget and $6$ junctions for each obstacle hexagon.  
% Therefore an upper bound for the number of flags around variable gadgets is $m \cdot 6 \cdot t \cdot 2 \cdot D$.
% The upper bound for the number of junctions in a transmitter gadget is $6 \ell_1 \lr{v_i, C_j}$.  
% Thus, the upper bound of all junctions in all transmitter gadgets is $$6 \cdot \sum_{\left\lbrace v_i, C_j \right\rbrace \in E} \ell_1 \lr{v_i, C_j}.$$
% The upper bound on the total number of flags is
% $$m \cdot 6 \cdot t \cdot 2 \cdot D + 6 \cdot \sum_{\left\lbrace v_i, C_j \right\rbrace \in E} \ell_1 \lr{v_i, C_j}.$$

For each corridor, there is one skinny rhombus attached to one flag in the corridor.  If the number of corridors is bounded polynomially, then the number of skinny rhombi is bounded by the same bound of the corridor.

\noindent (2) Recall that in the original auxilary construnction is a forest.
each obstacle hexagon with hinged flags (and small hexagons) is disjoint from the remainder of the the construction. 
The skinny rhombi in the modified auxilary construction connect the disjointed trees to form one tree.

\noindent (3) 







%it admits a realization such that the obstacle polygons has a maximal displacement from canonical position if and only if $\Phi$ is satisfiable.

If $\Phi$ is satisfiable, then its corresponding auxilary construction has a realization by Lemma \ref{lem:aux-A}.
The modified auxilary construction takes a realization of the auxilary construction to a realization of a polygonal linkage.
Thus, the modified auxilary construction admits a realization.


By Lemma \ref{lem:aux-C}, if the modified auxilary construction admits a realization, it must be close to canonical; every gadget has the same functionality as the ordinary auxilary construction.
With Lemma \ref{lem:aux-1}, at least one literal in every clause is true; Lemma \ref{lem:aux-2} the variable gadgets have state $R$ or $L$ accordingly.
Together, this implies that the flags and small hexagons in all corridors and junctions have a nonoverlapping area in the plane, thus the modified auxilary construction has a realization.



% By Lemma \ref{lem:aux-A} the 
% Encode $\Phi$ into its corresponding modified auxilary construction.
% The modified auxilary construction is the auxilary construction with a skinny rhombus attached to a flag in each corridor.   
% By Lemma \ref{lem:aux-A}, the auxilary construction of $\Phi$ admits a realization.
% such that the obstacle polygons has a maximal displacement from canonical position.

% Suppose we have a modified auxiliary construction where the obstacle polygons have a maximal displacement from canonical position.
% We first transform the realization of this construction back to its canonical position.
% We then decode the realization back to $\Phi$.  
% Since this realization has nonoverlapping parts, we have that $\Phi$ is satisfiable.

% When a flag hinged to a rhombus has sufficient range of motion to change state ($R$ to $L$ and vice versa), the construction becomes unstable.  
% If the state of the hexagons are preserved, regardless of the realization that the construction is in, then the Boolean logic encoded into the the construction is also preserved.

%  First suppose that $\Phi$ is satisfiable.  
%  Consider the canonical position of the modified auxiliary construction that encodes $\Phi$.
%  The frame of the modified construction has fixed position and implies a fixed height $h$ of any two opposing hexagonal frames.
% Suppose we draw a straight line segment $\ell$ of length $h$ from two opposing hexagonal frames; we will use this line segment as a guide to show that the modified auxilary construction admits a realization such that the obstascle polygons has a maximal displacement from canonical position.

% Suppose there are $m+1$ obstacle hexagons and $m$ corridors along $\ell$.
% Each corridor has $N$ flags and one skinny rhombus. 
% The skinny rhombus  has length $\sqrt{1 + \lr{100N}^{-2}}$
% The height of a skinny rhombus in canonical position is $\frac{1}{100N}$.
% In canonical position, the height of a skinny rhombus is $\frac{1}{100N}$, the obstacle hexagon has height of $ (t+1) \cdot \sqrt{3}$, the flag is of height $\sqrt{3}$.  
% The total height $h$ is the following sum:
% $$h = m \cdot \lr{\sqrt{3} + 1 + \frac{1}{100N} + (t+1) \cdot \sqrt{3}} + (t+1) \cdot \sqrt{3}$$

% From the canoncical position, from the widest point of a skinny rhombus there is a total of $\frac{1}{200N}$ gap space in the corridor between the flag, skinny rhombus, and the obstacle hexagons shaping the corridor; at the most the gap space in the corridor is at the point where the hinge of the skinny rhombus and the obstacle hexagon is $\frac{1}{100N}$.
% The bounds of total gap space $g_t$ across amongst the corridors along $\ell$ is $\frac{m}{200N} \leq g_t \leq \frac{m}{100N} \leq m \sqrt{3}$.
% $g_t$ does not admit enough space for a flag to move and alter state in any corridor.



% \begin{minipage}{\linewidth}
% \begin{center}
% \includegraphics[width=0.7\columnwidth]{graphics/tangentalpha.pdf}
% \captionof{figure}{Maclaurin series of $\tan^{-1}x$ is:
% $x-\frac{x^3}{3}+\frac{x^5}{5}-\frac{x^7}{7}+\frac{x^9}{9}+O(x^{10})$}
% \end{center}
% \end{minipage}
% \begin{minipage}{\linewidth}
% \begin{center}
% \includegraphics[width=0.3\columnwidth]{graphics/NonCanonicalPosition.pdf}
% \captionof{figure}{A stack of obstacle hexagons in an Non Canonical position between the parallel sides of two frame hexagons.}
% \end{center}
% \end{minipage}


% Given a modified auxilary construction $\tilde{A}(\Phi) = \left(\PP,\HH\right)$, the canonical realization of $\tilde{A}(\Phi)$, $R$, and the corresponding set of realizations $P$. 
% We need to show that for every $\epsilon > 0$ there exists a parameterization $\rho \in P$, $\mu:Phi \mapsto \bbR^{2m}$ where $m$ is the number of distinct vertices in $\PP_\rho$, such that $$\left\vert \mu (\rho) - \mu (R) \right\vert < \epsilon$$.

% First suppose the height of the honeycomb has a total height of $h$.
% This height is fixed due to the locked frame surrounding the honeycomb. 
% The total height $h$ is also the sum of the heights of the obstacle hexagons $h_O$, flags $h_f$, and skinny rhombi $h_r$ that intersect a vertical axis. 

% In canonical position, where $k$ is the number corridors along the vertical axis:
% \begin{enumerate}
% \item The height of the skinny rhombi is $h_r = \frac{k}{100 N^2}$. 
% \item The height of flags is $h_f = k \sqrt{3}$.
% \item The height of the obstacle hexagons is $h_O = (k+1) \cdot (t+1) \cdot \sqrt{3}$
% \end{enumerate}
% Thus $$h = k \lr{(t+2) \sqrt{3} + \frac{1}{100 N^2}} + (t+1) \cdot \sqrt{3}$$
% By taking a 
% \begin{enumerate}
% \item Suppose the honeycomb grid has a total height of $h$
% \item the number of obstacle hexagons along a vertical path from the top/bottom of the grid is K and the sum of their heights is $K \cdot h_\text{O}$.  
% \item the different of (1) and (2) is $h - K \cdot h_\text{O}$.
% \item ???
% \item profit
% \end{enumerate}




% $$\alpha \leq \tan^{-1} \frac{3}{N} \leq M = \frac{3}{N}$$
% $$ \lim_{x\rightarrow 0} \tan^{-1} x = x$$

% \begin{minipage}{\linewidth}
% \begin{center}
% \includegraphics[width=0.45\columnwidth]{graphics/AngularDisplacement.pdf}
% \end{center}
% \end{minipage}



\end{proof}



%To show that the hinge graph is a forest, we construct a simply connected polygonal linkage $(\PP,H)$ that has a realization with fixed orientation if and only if $\Phi$ is satisfiable.
























































































































































% \subsection{Functionality of the Auxilary Construction and Gadgets}
% %Prove Observation 1
% %Prove Observation 2
% %Prove Observation 3
% %Prove Lemma 2
% %Prove Lemma 3 - same as lemma 2 but with tree
% %
% We have described the auxiliary construction.  

% Since the height of the corridor is $\sqrt{3}$, each hexagon has exactly two possible realizations: it can lie either \emph{left} or \emph{right} of the hinge in a horizontal corridor. 
% For simplicity, we use the same notation (R and L) in nonhorizontal corridors, too. 
% Hence, the \emph{state} of each flag in a realization is either L or R. The following observation describes the key mechanism of a corridor.

% \begin{observation}\label{obs:corridor}
% \begin{itemize}
% \item[(1)] If the leftmost hexagon is in state R, then all $t$ hexagons are in state R, and the rightmost hexagon enters the junction on the right of the corridor.
% \item[(2)] Similarly, if the rightmost hexagon is in state L, then all $t$ hexagons are in state L, and the leftmost hexagon enters the junction on the left of the corridor.
% \end{itemize}
% \end{observation}
% The proof of Obesrvation \ref{obs:junction} is as follows:
% \begin{proof}\label{proof:junction}
% PROOF GOES HERE
% \end{proof}

% Prove that all flexagons around a variable gadget are either clockwise or counterclockwise


% Prove that 

% The following lemma summarizes our result about the auxiliary construction.
% \begin{lem}\label{lem:aux}
% For every instance $\Phi$ of P3SAT, the above polygonal linkage with flexible and obstacle polygons has the following properties: (1) it has polynomial size; (2) its hinge graph is a forest;
% (3) it admits a realization such that the obstacle polygons remain fixed if and only if $\Phi$ is satisfiable.
% \end{lem}
% \begin{proof}

% Suppose we have an instance $\Phi$ of P3SAT with $m$ variables and $n$ clauses with a corresponding associated graph $A(\Phi)=(V,E)$ and it is satisfiable.  
% We need to show the following three properties about its corresponding auxilliary construnction: it has polynomial size, its hinge graph is a forest, and it admits a realization such that the obstacle polygons remain fixed.

% \noindent (1) We can bound the number of obstacle hexagons to represent a variable gadget by $2 D$, where $D = \lr{ \max_{v \in V} \deg (v)}$.  
% The number of clause junctions is $n$.
% To give an upper bound on the number of flags in the auxiliary construction, we have to account for the flags in the transmitter gadgets, the extra hexagons found in junctions, and the flexible hexagons around the variable gadgets.

% Recall that that the number of flags in a corridor are $ t = 2N(m,n)^3 + 1 $ where $N(m,n)$ is a polynomial. 
% Recall that the drawing of $A(\Phi)$ have edges drawn in vertically and horizontally and can join at some ``elbow''.  
% The distance can be measured in the $\ell_1$ norm.
% Similarly in the honeycomb construction, the flexable hexagons zig-zig vertically and horizontally through out honeycomb.  
% The number of corridors about an obstacle hexagon is $6$.
% To give a generous upper bound on the number of flags in a transmitter gadget, is $6 \cdot t \cdot \ell_1\lr{v_i,C_j}$, assuming each obstacle hexagon is of unit height.

% The number of junctions in the auxiliary construction is the number of junctions to form all variable gadgets, transmitter gadgets, and clause gadgets. 
% We know there are at most $2 \cdot D$ obstacle hexagons to form each variable gadget and $6$ junctions for each obstacle hexagon.  
% Therefore an upper bound for the number of flags around variable gadgets is $m \cdot 6 \cdot t \cdot 2 \cdot D$.
% The upper bound for the number of junctions in a transmitter gadget is $6 \ell_1 \lr{v_i, C_j}$.  
% Thus, the upper bound of all junctions in all transmitter gadgets is $$6 \cdot \sum_{\left\lbrace v_i, C_j \right\rbrace \in E} \ell_1 \lr{v_i, C_j}.$$
% The upper bound on the total number of flags is
% $$m \cdot 6 \cdot t \cdot 2 \cdot D + 6 \cdot \sum_{\left\lbrace v_i, C_j \right\rbrace \in E} \ell_1 \lr{v_i, C_j}.$$

% \noindent (2) Recall that a forest is a disjoint union of trees. 
% By construction, each flag is hinged to exactly one obstacle hexagon.  
% There are no hinges between obstacle hexagons.
% Consequently, each component of the hinge graph is a star, where the center corresponds to an obstacle hexagon and the leafs corresponds to the flexable hexagons attached to it.

% \noindent (3) 

% To show that the hinge graph is a forest, we construct a simply connected polygonal linkage $(\PP,H)$ that has a realization with fixed orientation if and only if $\Phi$ is satisfiable.
% We modify the auxiliary construction allowing all polygons to move freely, and by adding extra polygons and hinges so that the hinge graph becomes a \emph{tree}, and the size of the construction remains polynomial. 
% Recall that our auxiliary construction is based on a polynomial section of the hexagonal grid, using obstacle hexagons of side lengths $(5t-1)/2$, unit hexagons (of side length 1), and small hexagons of side length $\frac{1}{3}$. 
% We modify it in 3 steps as follows.

% \begin{enumerate}
% \item Move the obstacle hexagons apart such that the width of each corridor increases from $\sqrt{3}$ to $\sqrt{3}+1/(100N)$.
% \item Replace the unit segment in each the clause gadget by a skinny rhombus of diameter $1.1$ and width $1/(200N)$.
% \item Consider a large (polynomial-size) regular hexagon $R$ that contains all gadgets in our construction, and enclose $R$ by a \emph{frame} of 6 congruent regular hexagons, as shown in Fig.~\ref{fig:frame}(a), hinged together in a path.
% \item Connect the frame and the obstacles in $R$ into a simply connected polygonal linkage: In each obstacle hexagon, the bottom or bottom-left side is adjacent to the frame or to a corridor. Introduce a hinge at the midpoint of one such side in each obstacle hexagon. If this side is adjacent to the frame, then attach the hinge to the frame. Otherwise, the hinge is attached to a new \emph{connector} polygon: a skinny rhombus of diameter 1 and width $1/(200N)$. The far corner of each rhombus is hinged to the unit hexagon in the middle of the corridor at shown in Fig.~\ref{fig:frame}(b).
% \end{enumerate}

% \begin{figure}[htbp]
% 	\centering
% 	\includegraphics[width=0.95\columnwidth]{graphics/fig-frame-hex}
% 	\caption{(a) A frame (built of 6 hinged regular hexagons) encloses a hexagonal tiling, and
%     vertical paths connect all obstacle hexagons to the frame.
%     (b) A corridor is widened to $\sqrt{3}+1/N^2$. A connection between
%     two adjacent obstacle hexagons is established via a skinny rhombus.}
% 	\label{fig:frame}
% \end{figure}
% We obtain a simply connected polygonal linkage. 
% We now allow the obstacle hexagons to move freely, and call their original fixed position \emph{canonical}. 
% \noindent (3) We may assume without loss of generality that the frame is at its original position. 
% It is enough to show that the obstacle hexagons are still confined to an $1/N$-neighborhood of their canonical position, then it
% follows that the polygonal linkage is realizable if and only if $\Phi$ is satisfiable.






% %Let $\Phi$ be an instance of P3SAT (i.e., a Boolean formula $\Phi$ in 3-CNF with $n$ variables, $m$ clauses, and a planar graph $A(\Phi)$).



% \end{proof}
% The modification of the auxiliary construction is a tree.  
% Satisfiability is an NP-hard problem \cite{cook1971complexity}.
% Thus, we prove Theorem \ref{thm:hinge2}

% The obstacle hexagons in the bottom and bottom-left rows are hinged directly to the frame,
% and so they are locked in their canonical position. Consider two obstacle hexagons on opposite
% sides of a corridor with connector. The distance between the midpoints of the opposite sides of
% the corridor is at least $\sqrt{3}$ (due to the unit hexagons in the corridor) and at most
% $1+\sqrt{3}$ (due to the connector polygon). The length of the corridor is much larger,
% $(5t-1)/2=5N^3+2$, so the orientations of the two adjacent obstacles differ by at most $1/2N^3$.
% Consequently, the orientation of \emph{any} obstacle differs from canonical by at most $1/2N^2$.
% Due to the unit hexagons within the horizontal corridors, the length of any vertical segment between
% the opposite sides of a horizontal corridor is at least $1-1/N^2$. The vertical distance between the
% bottom and top sides of the frame gives an upper bound of  $2N/(100N^2)=1/(50N)$ for the sum of these
% vertical distances. We conclude that the $y$-coordinates of the obstacles are within $1/(10N)$
% of the canonical position. Due to the connector polygons, the $x$-coordinates of
% two adjacent obstacles differ by either less than the vertical offset or by about
% one unit. However, the horizontal distance between the left and right frames prevent
% a shift of this magnitude. So the $x$-coordinates of the obstacle hexagons are also
% within $1/N$ of the canonical position.

